{% extends 'base_page.html' %}
{% block titulo_pagina %}SistemaWeb - Perfil do Usuário {% endblock %}

{% block recursos_necessarios %}
{% endblock %}


{% block titulo_cabecalho %} Perfil {% endblock %}
{% block conteudo_principal %}

<div id="angular_content" ng-cloak ng-app="modules.usuario">
  <div ng-controller="change_password_controller">
    <div class="x_panel">
      <div class="x_title">
        <h2>Trocar Senha <!--<small>Click to validate</small>--></h2>
        <ul class="nav navbar-right panel_toolbox">
          <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
          </li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
            <ul class="dropdown-menu" role="menu">
              <li><a href="#">Settings 1</a>
              </li>
              <li><a href="#">Settings 2</a>
              </li>
            </ul>
          </li>
          <li><a class="close-link"><i class="fa fa-close"></i></a>
          </li>
        </ul>
        <div class="clearfix"></div>
      </div>

      <div class="x_content">

        <!-- start form for validation -->
        <form id="form_change_password" autocomplete="off" ng-submit="save_password()" novalidate>
          {% csrf_token %}
          <fieldset>
            <div class="field">
              <label for="old_password">{{ form_change_password.old_password.label }}</label>
              {{ form_change_password.old_password }}

              <div class='tooltip help'>
                <span>?</span>
                <div class='content'>
                  <b></b>
                  <p>Name must be at least 2 words</p>
                </div>
              </div>

            </div>
            <br>

            <div class="field">
              <label for="password">{{ form_change_password.password.label }}</label>
              {{ form_change_password.password }}
            </div>
            <br>

            <div class="field">
              <label for="password">{{ form_change_password.confirm_password.label }}</label>
              {{ form_change_password.confirm_password }}
              <div class='tooltip help'>
                <span>?</span>
                <div class='content'>
                  <b></b>
                  <p>Name must be at least 2 words</p>
                </div>
              </div>
            </div>

            <br><br>


            {% verbatim %}
            {{ old_password }}
            {{ password }}
            {{ confirm_password }}
            {% endverbatim %}

            <button type="submit" class="submit btn btn-success pull-right">Enviar</button>
          </fieldset>

          <ul class="errorlist">
            <li>confirm_password
              <ul class="errorlist">
                <li>Este campo é obrigatório.</li>
              </ul>
            </li>

            <li>password
              <ul class="errorlist">
                <li>Este campo é obrigatório.</li>
              </ul>
            </li>

            <li>old_password
              <ul class="errorlist">
                <li>Este campo é obrigatório.</li>
              </ul>
            </li>
          </ul>

          <!--<input type="text" id="fullname" class="form-control" name="fullname" required />-->

          <!--
          <label for="email">Email * :</label>
          <input type="email" id="email" class="form-control" name="email" data-parsley-trigger="change" required />

          <label>Gender *:</label>
          <p>
            M:
            <input type="radio" class="flat" name="gender" id="genderM" value="M" checked="" required /> F:
            <input type="radio" class="flat" name="gender" id="genderF" value="F" />
          </p>

          <label>Hobbies (2 minimum):</label>
          <p style="padding: 5px;">
            <input type="checkbox" name="hobbies[]" id="hobby1" value="ski" data-parsley-mincheck="2" required class="flat" /> Skiing
            <br />

            <input type="checkbox" name="hobbies[]" id="hobby2" value="run" class="flat" /> Running
            <br />

            <input type="checkbox" name="hobbies[]" id="hobby3" value="eat" class="flat" /> Eating
            <br />

            <input type="checkbox" name="hobbies[]" id="hobby4" value="sleep" class="flat" /> Sleeping
            <br />
            <p>

              <label for="heard">Heard us by *:</label>
              <select id="heard" class="form-control" required>
                <option value="">Choose..</option>
                <option value="press">Press</option>
                <option value="net">Internet</option>
                <option value="mouth">Word of mouth</option>
              </select>

              <label for="message">Message (20 chars min, 100 max) :</label>
              <textarea id="message" required="required" class="form-control" name="message" data-parsley-trigger="keyup" data-parsley-minlength="20" data-parsley-maxlength="100" data-parsley-minlength-message="Come on! You need to enter at least a 20 caracters long comment.."
                data-parsley-validation-threshold="10"></textarea>

              <br/>
              <span class="btn btn-primary">Validate form</span>
          -->

        </form>
        <!-- end form for validations -->

      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block recursos_complementares %}
  {% load static %}
  <script src="{% static 'modules/usuario/usuario_controller.js' %}"></script>
  <script src="{% static 'modules/usuario/usuario.js' %}"></script>

  <!--<script>
    $('#form_change_password').submit(function(e){
      e.preventDefault();
      var submit = false;

      var messages = {
        invalid         : 'Informe numeros e letras!',
        short           : 'Informe pelo menos 8 caracteres!',
        long            : 'Informe no máximo x caracteres!',
        checked         : 'must be checked',
        empty           : 'Campo obrigatório!',
        select          : 'Please select an option',
        number_min      : 'too low',
        number_max      : 'too high',
        url             : 'invalid URL',
        number          : 'not a number',
        email           : 'email address is invalid',
        email_repeat    : 'emails do not match',
        date            : 'invalid date',
        time            : 'invalid time',
        password_repeat : 'Senhas não conferem!',
        no_match        : 'no match',
        complete        : 'input is not complete'
      }

      var validator = new FormValidator();
      validator.texts = messages;
      validator.settings.alerts = true;

      if(!validator.checkAll($(this)))
        submit = false;

      if(submit){
        this.submit();
      }
      else{
        return false;
      }
    }
  )
  </script>-->

{% endblock %}